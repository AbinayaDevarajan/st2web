<h3 class="st2-rule-picker__title">Construct the rule</h3>

<div class="st2-rule-picker__container">
  When
  <span class="st2-rule-picker__this" ng-click="popup = 'trigger'"><!--
 -->{{ (inventory | unwrap).triggers.index[rule.trigger_type.name].service || 'this' }}<!--
 --><div class="st2-rule-picker__marker" ng-show="popup == 'trigger'"></div><!--
--></span>
  triggers, fire
  <span class="st2-rule-picker__that"  ng-click="popup = 'action'"><!--
 -->{{ (inventory | unwrap).actions.index[rule.action.type].service || 'that' }}<!--
 --><div class="st2-rule-picker__marker" ng-show="popup == 'action'"></div><!--
--></span>
  staction
</div>

<div class="st2-rule-popup" type="trigger" ng-show="popup == 'trigger'" rule="rule"></div>
<div class="st2-rule-popup" type="action" ng-show="popup == 'action'" rule="rule"></div>

<div class="st2-buttons" ng-show="rule.trigger_type && rule.action">
  <button class="st2-buttons__internal st2-buttons__secondary"
    ng-click="submit()">Change</button>
  <button class="st2-buttons__global st2-buttons__primary"
    ng-click="submit()">Next</button>
</div>
